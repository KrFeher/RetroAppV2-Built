(this.webpackJsonpretroapp=this.webpackJsonpretroapp||[]).push([[0],{168:function(e,t,a){e.exports=a(323)},173:function(e,t,a){},323:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),i=a.n(c),o=(a(173),a(12)),s=(a(174),a(36)),l=a(38),u=a(333),p=a(342),m=a(343),d=a(335),f=a(107),b=a(7),E=a.n(b),v=a(18),h=a(341),O=a(339),g=a(334),j=a(324),x=a(338),w=a(33),k=a(41),y=a.n(k),P="https://retroappserver.krisfeher.com",C={getRetros:function(){return Object(v.a)(E.a.mark((function e(){var t,a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(P,"/api/retros"),e.prev=1,e.next=4,y.a.get(t);case 4:n=e.sent,a=n.data,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},getRetro:function(e){return Object(v.a)(E.a.mark((function t(){var a,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(P,"/api/retro/").concat(e),t.prev=1,t.next=4,y.a.get(a);case 4:n=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:return t.abrupt("return",n.data);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},submitRetroOpinions:function(e,t){return Object(v.a)(E.a.mark((function a(){var n,r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n="".concat(P,"/api/retro/opinions/").concat(e),a.next=3,y.a.post(n,{opinions:t});case 3:return r=a.sent,a.abrupt("return",200===r.status);case 5:case"end":return a.stop()}}),a)})))()},submitVotesOnOpinion:function(e,t){return Object(v.a)(E.a.mark((function a(){var n,r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n="".concat(P,"/api/retro/opinions/votes/").concat(e),a.next=3,y.a.post(n,{votedOpinions:t});case 3:return r=a.sent,a.abrupt("return",200===r.status);case 5:case"end":return a.stop()}}),a)})))()},addRetro:function(e){return Object(v.a)(E.a.mark((function t(){var a,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(P,"/api/retro/").concat(e),t.prev=1,t.next=4,y.a.post(a);case 4:return n=t.sent,t.abrupt("return",200===n.status);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},deleteRetro:function(e){return Object(v.a)(E.a.mark((function t(){var a,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(P,"/api/retro/").concat(e),t.prev=1,t.next=4,y.a.delete(a);case 4:return n=t.sent,t.abrupt("return",200===n.status);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},S=a(45),R=a.n(S),F=function(e){var t=[Object(h.a)(),Object(h.a)()],a=Object(l.g)(),c=R.a.parse(a.search),i=Object(n.useState)([{id:t[0],description:"Example Positive Feedback",isPositive:!0},{id:t[1],description:"Example Negative Feedback",isPositive:!1}]),s=Object(o.a)(i,2),m=s[0],b=s[1],k=Object(n.useState)("default"),y=Object(o.a)(k,2),P=y[0],S=y[1],F=Object(n.useState)(""),A=Object(o.a)(F,2),N=A[0],z=A[1],V=Object(n.useState)(""),L=Object(o.a)(V,2),D=(L[0],L[1]),I=Object(n.useState)(!1),_=Object(o.a)(I,2),B=_[0],W=_[1];Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getRetro(c.id);case 2:t=e.sent,D(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var q=function(){switch(P){case"default":S(!0);break;case!0:S(!1);break;case!1:S(!0)}},J=function(){var e=Object(v.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.submitRetroOpinions(c.id,m);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var t=Object(v.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J();case 2:t.sent?e.finishedAddingAction(1):W(!0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(O.a,{error:!0,content:"Something went wrong server side. Please try again.",size:"tiny",hidden:!B}),r.a.createElement(p.a,null,r.a.createElement(p.a.Column,null,r.a.createElement(p.a.Row,{style:{paddingBottom:"10px"}},r.a.createElement(g.a,{label:"Write an opinion : ",onChange:function(e){z(e.target.value)}})),r.a.createElement(p.a.Row,{style:{paddingBottom:"10px"}},"Choose intention: ","default"===P?r.a.createElement(j.a,{circular:!0,size:"tiny",style:{marginLeft:"10px"},onClick:q},"Choose"):P?r.a.createElement(j.a,{circular:!0,icon:"plus",size:"tiny",style:{marginLeft:"10px"},color:"green",onClick:q}):r.a.createElement(j.a,{circular:!0,icon:"minus",size:"tiny",style:{marginLeft:"10px"},color:"red",onClick:q}),r.a.createElement(j.a,{floated:"right",size:"tiny",color:"olive",onClick:function(){"default"!==P&&N&&b([].concat(Object(f.a)(m),[{id:Object(h.a)(),description:N,isPositive:P}]))}},"Add opinion")),r.a.createElement(p.a.Row,null))),r.a.createElement(d.a,null),r.a.createElement(x.a,null,m.map((function(e){return r.a.createElement(x.a.Item,{style:{padding:"5px"},key:e.id},r.a.createElement(x.a.Content,{floated:"left"},r.a.createElement(x.a.Description,null,e.isPositive?r.a.createElement(w.a,{name:"plus",color:"green"}):r.a.createElement(w.a,{name:"minus",color:"red"}),e.description)),r.a.createElement(x.a.Content,{floated:"right"},r.a.createElement(j.a,{size:"mini",icon:"trash",circular:!0,onClick:function(){return function(e){var t=m.filter((function(t){return t.id!==e}));b(Object(f.a)(t))}(e.id)}})))})))),r.a.createElement(u.a,{textAlign:"right",style:{paddingTop:"30px"}},r.a.createElement(j.a,{icon:!0,labelPosition:"right",onClick:T},"Next step: Vote",r.a.createElement(w.a,{name:"right arrow"}))))},A=a(57),N=a(78),z=function(e){var t=Object(n.useState)([{id:Object(h.a)(),description:"Example Positive Feedback1",isPositive:!0},{id:Object(h.a)(),description:"Example Positive Feedback2",isPositive:!0},{id:Object(h.a)(),description:"Example Positive Feedback3",isPositive:!0},{id:Object(h.a)(),description:"Example Positive Feedback4",isPositive:!0},{id:Object(h.a)(),description:"Example Negative Feedback1",isPositive:!1},{id:Object(h.a)(),description:"Example Negative Feedback2",isPositive:!1},{id:Object(h.a)(),description:"Example Negative Feedback3",isPositive:!1},{id:Object(h.a)(),description:"Example Negative Feedback4",isPositive:!1}]),a=Object(o.a)(t,2),c=(a[0],a[1],Object(n.useState)([])),i=Object(o.a)(c,2),s=i[0],p=i[1],m=R.a.parse(Object(l.g)().search),d=Object(n.useState)(!1),f=Object(o.a)(d,2),b=f[0],g=f[1];Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getRetro(m.id);case 2:(t=e.sent).opinions=t.opinions.sort((function(e,t){return e.isPositive===t.isPositive?0:e.isPositive?-1:1})),a={},t.opinions.forEach((function(e){a=Object(N.a)({},a,Object(A.a)({},e.id,{description:e.description,isPositive:e.isPositive,upVoted:!1}))})),p(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var k=function(){var t=Object(v.a)(E.a.mark((function t(){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object.entries(s).map((function(e){return e[1].upVoted?e[0]:null})).filter((function(e){return null!==e})),t.next=3,C.submitVotesOnOpinion(m.id,a);case 3:t.sent?e.finishedAddingAction(1):g(!0),e.finishedAddingAction(2);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(O.a,{error:!0,content:"Something went wrong server side. Please try again.",size:"tiny",hidden:!b}),r.a.createElement(x.a,null,Object.entries(s).map((function(e){return r.a.createElement(x.a.Item,{style:{padding:"5px"},key:e[0]},r.a.createElement(x.a.Content,{floated:"left"},r.a.createElement(x.a.Description,null,e[1].isPositive?r.a.createElement(w.a,{name:"plus",color:"green"}):r.a.createElement(w.a,{name:"minus",color:"red"}),e[1].description)),r.a.createElement(x.a.Content,{floated:"right"},r.a.createElement(j.a,{size:"mini",icon:"up arrow",color:s[e[0]].upVoted?"green":"grey",circular:!0,onClick:function(){return t=e[0],void p(Object(N.a)({},s,Object(A.a)({},t,Object(N.a)({},s[t],{upVoted:!s[t].upVoted}))));var t}})))})))),r.a.createElement(u.a,{textAlign:"right",style:{paddingTop:"30px"}},r.a.createElement(j.a,{icon:!0,labelPosition:"right",onClick:k},"Next step: See Summary",r.a.createElement(w.a,{name:"right arrow"}))))},V=a(58),L=function(e){var t=Object(n.useState)([{id:Object(h.a)(),description:"Example Positive Feedback1",isPositive:!0,votes:5},{id:Object(h.a)(),description:"Example Positive Feedback2",isPositive:!0,votes:2},{id:Object(h.a)(),description:"Example Positive Feedback3",isPositive:!0,votes:1},{id:Object(h.a)(),description:"Example Positive Feedback4",isPositive:!0,votes:4},{id:Object(h.a)(),description:"Example Negative Feedback1",isPositive:!1,votes:0},{id:Object(h.a)(),description:"Example Negative Feedback2",isPositive:!1,votes:0},{id:Object(h.a)(),description:"Example Negative Feedback3",isPositive:!1,votes:3},{id:Object(h.a)(),description:"Example Negative Feedback4",isPositive:!1,votes:2}]),a=Object(o.a)(t,2),c=(a[0],a[1],Object(n.useState)([])),i=Object(o.a)(c,2),s=i[0],p=i[1],m=Object(n.useState)([]),f=Object(o.a)(m,2),b=f[0],O=f[1],g=R.a.parse(Object(l.g)().search);return Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(E.a.mark((function e(){var t,a,n,r,c,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getRetro(g.id);case 2:t=e.sent,a=t.opinions,n=a.filter((function(e){return e.isPositive})),r=a.filter((function(e){return!e.isPositive})),c=n.sort((function(e,t){return t.votes-e.votes})),i=r.sort((function(e,t){return t.votes-e.votes})),p(c),O(i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(x.a,null,s.map((function(e){return r.a.createElement(x.a.Item,{style:{padding:"5px"},key:e.id},r.a.createElement(x.a.Content,{floated:"left"},r.a.createElement(x.a.Description,null,e.isPositive?r.a.createElement(w.a,{name:"plus",color:"green"}):r.a.createElement(w.a,{name:"minus",color:"red"}),e.description)),r.a.createElement(x.a.Content,{floated:"right"},r.a.createElement(V.a,null,e.votes)))}))),r.a.createElement(d.a,null),r.a.createElement(x.a,null,b.map((function(e){return r.a.createElement(x.a.Item,{style:{padding:"5px"},key:e.id},r.a.createElement(x.a.Content,{floated:"left"},r.a.createElement(x.a.Description,null,e.isPositive?r.a.createElement(w.a,{name:"plus",color:"green"}):r.a.createElement(w.a,{name:"minus",color:"red"}),e.description)),r.a.createElement(x.a.Content,{floated:"right"},r.a.createElement(V.a,null,e.votes)))})))))},D=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),s=Object(o.a)(i,2),l=s[0],f=s[1],b=Object(n.useState)(!1),E=Object(o.a)(b,2),v=E[0],h=E[1],O=Object(n.useState)(1),g=Object(o.a)(O,2),j=g[0],x=g[1],w=function(e){switch(e){case 1:c(!1),x(2),f(!0);break;case 2:f(!1),x(3),h(!0)}};return r.a.createElement(u.a,{style:{width:"600px",border:"1px solid",margin:"15px",padding:"15px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Column,{textAlign:"center"},r.a.createElement(m.a,null,r.a.createElement(m.a.Section,{active:1===j},"Add opinion"),r.a.createElement(m.a.Divider,{icon:"right arrow"}),r.a.createElement(m.a.Section,{active:2===j},"Vote for others"),r.a.createElement(m.a.Divider,{icon:"right arrow"}),r.a.createElement(m.a.Section,{active:3===j},"See summary")),r.a.createElement(d.a,null))),a&&r.a.createElement(F,{finishedAddingAction:w}),l&&r.a.createElement(z,{finishedAddingAction:w}),v&&r.a.createElement(L,null))},I=a(336),_=a(28),B=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),l=s[0],m=s[1],f=Object(n.useState)(!1),b=Object(o.a)(f,2),h=b[0],O=b[1],w=Object(n.useState)(!1),k=Object(o.a)(w,2),y=k[0],P=k[1];Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getRetros();case 2:(t=e.sent)?c(t):Object(_.b)("Could not read retros from server. Something is wrong!",{type:"error"});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var S=function(){var e=Object(v.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(!0),!l){e.next=21;break}if(a.find((function(e){return e._id===l}))){e.next=17;break}return e.next=6,C.addRetro(l);case 6:if(e.sent){e.next=11;break}Object(_.b)("Something went wrong while adding new retro, please try again!",{type:"error"}),e.next=15;break;case 11:return e.next=13,C.getRetros();case 13:t=e.sent,c(t);case 15:e.next=19;break;case 17:Object(_.b)("Please enter a unique retro name.",{type:"info"}),O(!0);case 19:e.next=23;break;case 21:Object(_.b)("Please enter something to the retro name.",{type:"warning"}),O(!0);case 23:P(!1);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(v.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,C.deleteRetro(t);case 3:if(e.sent){e.next=8;break}Object(_.b)("Something went wrong while deleting retro, please try again!",{type:"error"}),e.next=12;break;case 8:return e.next=10,C.getRetros();case 10:a=e.sent,c(a);case 12:P(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(u.a,{style:{width:"500px",border:"1px solid",margin:"15px",padding:"15px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Column,{floated:"left",width:12},r.a.createElement("h2",null,"Create new retro")),r.a.createElement(p.a.Column,{floated:"right",width:2},r.a.createElement(I.a,{active:y}))),r.a.createElement(g.a,{placeholder:"unique retro name",onChange:function(e){var t=e.target.value.trim();a.find((function(e){return e._id===t}))?O(!0):h&&O(!1),m(t)},error:h}),r.a.createElement(j.a,{onClick:S},"Create"),r.a.createElement(d.a,null),r.a.createElement("h2",null,"Retro management"),r.a.createElement(x.a,null,a.map((function(e){return r.a.createElement(x.a.Item,{key:e._id},r.a.createElement(x.a.Content,{floated:"left"},r.a.createElement("h4",{style:{padding:"5px"}},e._id)),r.a.createElement(x.a.Content,{floated:"right"},r.a.createElement(j.a,{color:"red",size:"tiny",onClick:function(){return R(e._id)}},"Delete")))}))))},W=a(340);var q=function(){var e=Object(l.f)(),t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],i=a[1],m=Object(n.useState)(!0),f=Object(o.a)(m,2),b=f[0],h=f[1];return Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,C.getRetros();case 3:(t=e.sent)?i(t):Object(_.b)("Could not read retros from server. Something is wrong!",{type:"error"}),h(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(u.a,{style:{width:"500px",border:"1px solid",margin:"15px",padding:"15px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Column,{floated:"left",width:8},r.a.createElement("h1",null," Retro app"),r.a.createElement(d.a,null)),r.a.createElement(p.a.Column,{floated:"right",width:8,textAlign:"right"},r.a.createElement(j.a,{onClick:function(){return e.push("/admin")}},"Retro lead login"))),b?r.a.createElement(r.a.Fragment,null,"loading retros...",r.a.createElement(W.a,null,r.a.createElement(W.a.Line,null),r.a.createElement(W.a.Line,null),r.a.createElement(W.a.Line,null),r.a.createElement(W.a.Line,null),r.a.createElement(W.a.Line,null))):r.a.createElement(p.a,null,r.a.createElement(p.a.Row,{style:{margin:"5px"}},r.a.createElement("h3",null,"All open retros to join:")),r.a.createElement(p.a.Row,null,r.a.createElement(s.a,null,r.a.createElement(x.a,{selection:!0},c.map((function(t){return r.a.createElement(x.a.Item,{onClick:function(){return e.push("/retro?id=".concat(t._id))}},r.a.createElement(x.a.Content,null,r.a.createElement(x.a.Header,null,t._id)))})))))))};a(322);var J=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0];return t[1],r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(q,null)),r.a.createElement(l.a,{path:"/retro"},r.a.createElement(D,null)),r.a.createElement(l.a,{path:"/admin"},a?r.a.createElement(B,null):r.a.createElement(q,null)))),r.a.createElement(_.a,{position:"bottom-center"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[168,1,2]]]);
//# sourceMappingURL=main.bd07f87f.chunk.js.map