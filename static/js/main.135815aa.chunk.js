(this.webpackJsonpretroapp=this.webpackJsonpretroapp||[]).push([[0],{166:function(e,t,a){e.exports=a(320)},171:function(e,t,a){},320:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(37),c=a.n(i),o=(a(171),a(16)),s=(a(172),a(32)),l=a(34),u=a(328),p=a(335),d=a(336),m=a(330),f=a(105),E=a(9),b=a.n(E),v=a(17),O=a(334),h=a(333),g=a(329),j=a(321),x=a(332),w=a(29),k=a(39),y=a.n(k),P="https://retroappserver.krisfeher.com",C={getRetros:function(){return Object(v.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(P,"/api/retros"),e.next=3,y.a.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))()},getRetro:function(e){return Object(v.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(P,"/api/retro/").concat(e),t.next=3,y.a.get(a);case 3:return n=t.sent,t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})))()},submitRetroOpinions:function(e,t){return Object(v.a)(b.a.mark((function a(){var n,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n="".concat(P,"/api/retro/opinions/").concat(e),a.next=3,y.a.post(n,{opinions:t});case 3:return r=a.sent,a.abrupt("return",200===r.status);case 5:case"end":return a.stop()}}),a)})))()},submitVotesOnOpinion:function(e,t){return Object(v.a)(b.a.mark((function a(){var n,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n="".concat(P,"/api/retro/opinions/votes/").concat(e),a.next=3,y.a.post(n,{votedOpinions:t});case 3:return r=a.sent,a.abrupt("return",200===r.status);case 5:case"end":return a.stop()}}),a)})))()},addRetro:function(e){return Object(v.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(P,"/api/retro/").concat(e),t.next=3,y.a.post(a);case 3:return n=t.sent,t.abrupt("return",200===n.status);case 5:case"end":return t.stop()}}),t)})))()},deleteRetro:function(e){return Object(v.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(P,"/api/retro/").concat(e),t.next=3,y.a.delete(a);case 3:return n=t.sent,t.abrupt("return",200===n.status);case 5:case"end":return t.stop()}}),t)})))()}},S=a(43),R=a.n(S),A=function(e){var t=[Object(O.a)(),Object(O.a)()],a=Object(l.g)(),i=R.a.parse(a.search),c=Object(n.useState)([{id:t[0],description:"Example Positive Feedback",isPositive:!0},{id:t[1],description:"Example Negative Feedback",isPositive:!1}]),s=Object(o.a)(c,2),d=s[0],E=s[1],k=Object(n.useState)("default"),y=Object(o.a)(k,2),P=y[0],S=y[1],A=Object(n.useState)(""),F=Object(o.a)(A,2),N=F[0],z=F[1],V=Object(n.useState)(""),D=Object(o.a)(V,2),I=(D[0],D[1]),B=Object(n.useState)(!1),L=Object(o.a)(B,2),W=L[0],J=L[1];Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getRetro(i.id);case 2:t=e.sent,I(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var T=function(){switch(P){case"default":S(!0);break;case!0:S(!1);break;case!1:S(!0)}},q=function(){var e=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.submitRetroOpinions(i.id,d);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var t=Object(v.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q();case 2:t.sent?e.finishedAddingAction(1):J(!0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(h.a,{error:!0,content:"Something went wrong server side. Please try again.",size:"tiny",hidden:!W}),r.a.createElement(p.a,null,r.a.createElement(p.a.Column,null,r.a.createElement(p.a.Row,{style:{paddingBottom:"10px"}},r.a.createElement(g.a,{label:"Write an opinion : ",onChange:function(e){z(e.target.value)}})),r.a.createElement(p.a.Row,{style:{paddingBottom:"10px"}},"Choose intention: ","default"===P?r.a.createElement(j.a,{circular:!0,size:"tiny",style:{marginLeft:"10px"},onClick:T},"Choose"):P?r.a.createElement(j.a,{circular:!0,icon:"plus",size:"tiny",style:{marginLeft:"10px"},color:"green",onClick:T}):r.a.createElement(j.a,{circular:!0,icon:"minus",size:"tiny",style:{marginLeft:"10px"},color:"red",onClick:T}),r.a.createElement(j.a,{floated:"right",size:"tiny",color:"olive",onClick:function(){"default"!==P&&N&&E([].concat(Object(f.a)(d),[{id:Object(O.a)(),description:N,isPositive:P}]))}},"Add opinion")),r.a.createElement(p.a.Row,null))),r.a.createElement(m.a,null),r.a.createElement(x.a,null,d.map((function(e){return r.a.createElement(x.a.Item,{style:{padding:"5px"},key:e.id},r.a.createElement(x.a.Content,{floated:"left"},r.a.createElement(x.a.Description,null,e.isPositive?r.a.createElement(w.a,{name:"plus",color:"green"}):r.a.createElement(w.a,{name:"minus",color:"red"}),e.description)),r.a.createElement(x.a.Content,{floated:"right"},r.a.createElement(j.a,{size:"mini",icon:"trash",circular:!0,onClick:function(){return function(e){var t=d.filter((function(t){return t.id!==e}));E(Object(f.a)(t))}(e.id)}})))})))),r.a.createElement(u.a,{textAlign:"right",style:{paddingTop:"30px"}},r.a.createElement(j.a,{icon:!0,labelPosition:"right",onClick:H},"Next step: Vote",r.a.createElement(w.a,{name:"right arrow"}))))},F=a(55),N=a(76),z=function(e){var t=Object(n.useState)([{id:Object(O.a)(),description:"Example Positive Feedback1",isPositive:!0},{id:Object(O.a)(),description:"Example Positive Feedback2",isPositive:!0},{id:Object(O.a)(),description:"Example Positive Feedback3",isPositive:!0},{id:Object(O.a)(),description:"Example Positive Feedback4",isPositive:!0},{id:Object(O.a)(),description:"Example Negative Feedback1",isPositive:!1},{id:Object(O.a)(),description:"Example Negative Feedback2",isPositive:!1},{id:Object(O.a)(),description:"Example Negative Feedback3",isPositive:!1},{id:Object(O.a)(),description:"Example Negative Feedback4",isPositive:!1}]),a=Object(o.a)(t,2),i=(a[0],a[1],Object(n.useState)([])),c=Object(o.a)(i,2),s=c[0],p=c[1],d=R.a.parse(Object(l.g)().search),m=Object(n.useState)(!1),f=Object(o.a)(m,2),E=f[0],g=f[1];Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getRetro(d.id);case 2:(t=e.sent).opinions=t.opinions.sort((function(e,t){return e.isPositive===t.isPositive?0:e.isPositive?-1:1})),a={},t.opinions.forEach((function(e){a=Object(N.a)({},a,Object(F.a)({},e.id,{description:e.description,isPositive:e.isPositive,upVoted:!1}))})),p(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var k=function(){var t=Object(v.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object.entries(s).map((function(e){return e[1].upVoted?e[0]:null})).filter((function(e){return null!==e})),t.next=3,C.submitVotesOnOpinion(d.id,a);case 3:t.sent?e.finishedAddingAction(1):g(!0),e.finishedAddingAction(2);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(h.a,{error:!0,content:"Something went wrong server side. Please try again.",size:"tiny",hidden:!E}),r.a.createElement(x.a,null,Object.entries(s).map((function(e){return r.a.createElement(x.a.Item,{style:{padding:"5px"},key:e[0]},r.a.createElement(x.a.Content,{floated:"left"},r.a.createElement(x.a.Description,null,e[1].isPositive?r.a.createElement(w.a,{name:"plus",color:"green"}):r.a.createElement(w.a,{name:"minus",color:"red"}),e[1].description)),r.a.createElement(x.a.Content,{floated:"right"},r.a.createElement(j.a,{size:"mini",icon:"up arrow",color:s[e[0]].upVoted?"green":"grey",circular:!0,onClick:function(){return t=e[0],void p(Object(N.a)({},s,Object(F.a)({},t,Object(N.a)({},s[t],{upVoted:!s[t].upVoted}))));var t}})))})))),r.a.createElement(u.a,{textAlign:"right",style:{paddingTop:"30px"}},r.a.createElement(j.a,{icon:!0,labelPosition:"right",onClick:k},"Next step: See Summary",r.a.createElement(w.a,{name:"right arrow"}))))},V=a(56),D=function(e){var t=Object(n.useState)([{id:Object(O.a)(),description:"Example Positive Feedback1",isPositive:!0,votes:5},{id:Object(O.a)(),description:"Example Positive Feedback2",isPositive:!0,votes:2},{id:Object(O.a)(),description:"Example Positive Feedback3",isPositive:!0,votes:1},{id:Object(O.a)(),description:"Example Positive Feedback4",isPositive:!0,votes:4},{id:Object(O.a)(),description:"Example Negative Feedback1",isPositive:!1,votes:0},{id:Object(O.a)(),description:"Example Negative Feedback2",isPositive:!1,votes:0},{id:Object(O.a)(),description:"Example Negative Feedback3",isPositive:!1,votes:3},{id:Object(O.a)(),description:"Example Negative Feedback4",isPositive:!1,votes:2}]),a=Object(o.a)(t,2),i=(a[0],a[1],Object(n.useState)([])),c=Object(o.a)(i,2),s=c[0],p=c[1],d=Object(n.useState)([]),f=Object(o.a)(d,2),E=f[0],h=f[1],g=R.a.parse(Object(l.g)().search);return Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(b.a.mark((function e(){var t,a,n,r,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getRetro(g.id);case 2:t=e.sent,a=t.opinions,n=a.filter((function(e){return e.isPositive})),r=a.filter((function(e){return!e.isPositive})),i=n.sort((function(e,t){return t.votes-e.votes})),c=r.sort((function(e,t){return t.votes-e.votes})),p(i),h(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(x.a,null,s.map((function(e){return r.a.createElement(x.a.Item,{style:{padding:"5px"},key:e.id},r.a.createElement(x.a.Content,{floated:"left"},r.a.createElement(x.a.Description,null,e.isPositive?r.a.createElement(w.a,{name:"plus",color:"green"}):r.a.createElement(w.a,{name:"minus",color:"red"}),e.description)),r.a.createElement(x.a.Content,{floated:"right"},r.a.createElement(V.a,null,e.votes)))}))),r.a.createElement(m.a,null),r.a.createElement(x.a,null,E.map((function(e){return r.a.createElement(x.a.Item,{style:{padding:"5px"},key:e.id},r.a.createElement(x.a.Content,{floated:"left"},r.a.createElement(x.a.Description,null,e.isPositive?r.a.createElement(w.a,{name:"plus",color:"green"}):r.a.createElement(w.a,{name:"minus",color:"red"}),e.description)),r.a.createElement(x.a.Content,{floated:"right"},r.a.createElement(V.a,null,e.votes)))})))))},I=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(!1),s=Object(o.a)(c,2),l=s[0],f=s[1],E=Object(n.useState)(!1),b=Object(o.a)(E,2),v=b[0],O=b[1],h=Object(n.useState)(1),g=Object(o.a)(h,2),j=g[0],x=g[1],w=function(e){switch(e){case 1:i(!1),x(2),f(!0);break;case 2:f(!1),x(3),O(!0)}};return r.a.createElement(u.a,{style:{width:"600px",border:"1px solid",margin:"15px",padding:"15px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Column,{textAlign:"center"},r.a.createElement(d.a,null,r.a.createElement(d.a.Section,{active:1===j},"Add opinion"),r.a.createElement(d.a.Divider,{icon:"right arrow"}),r.a.createElement(d.a.Section,{active:2===j},"Vote for others"),r.a.createElement(d.a.Divider,{icon:"right arrow"}),r.a.createElement(d.a.Section,{active:3===j},"See summary")),r.a.createElement(m.a,null))),a&&r.a.createElement(A,{finishedAddingAction:w}),l&&r.a.createElement(z,{finishedAddingAction:w}),v&&r.a.createElement(D,null))},B=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(""),s=Object(o.a)(c,2),l=s[0],p=s[1];Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getRetros();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a]);return r.a.createElement(u.a,{style:{width:"500px",border:"1px solid",margin:"15px",padding:"15px"}},r.a.createElement("h2",null,"Create new retro"),r.a.createElement(g.a,{placeholder:"unique retro name",onChange:function(e){p(e.target.value)}}),r.a.createElement(j.a,{onClick:function(){l&&C.addRetro(l)}},"Create"),r.a.createElement(m.a,null),r.a.createElement("h2",null,"Retro management"),r.a.createElement(x.a,null,a.map((function(e){return r.a.createElement(x.a.Item,null,r.a.createElement(x.a.Content,{floated:"left"},r.a.createElement("h4",{style:{padding:"5px"}},e.id)),r.a.createElement(x.a.Content,{floated:"right"},r.a.createElement(j.a,{color:"red",size:"tiny",onClick:function(){return t=e.id,void C.deleteRetro(t);var t}},"Delete")))}))))};var L=function(e){var t=Object(l.f)(),a=Object(n.useState)([]),i=Object(o.a)(a,2),c=i[0],d=i[1];return Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getRetros();case 2:t=e.sent,d(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(u.a,{style:{width:"500px",border:"1px solid",margin:"15px",padding:"15px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Column,{floated:"left",width:8},r.a.createElement("h1",null," Retro app"),r.a.createElement(m.a,null)),r.a.createElement(p.a.Column,{floated:"right",width:8,textAlign:"right"},r.a.createElement(j.a,{onClick:function(){return t.push("/admin")}},"Retro lead login"))),r.a.createElement(p.a,null,r.a.createElement(h.a,{error:!0,content:"Only logged in users can access the retro creation page",size:"tiny",hidden:!e.error}),r.a.createElement(p.a.Row,{style:{margin:"5px"}},r.a.createElement("h3",null,"All open retros to join:")),r.a.createElement(p.a.Row,null,r.a.createElement(s.a,null,r.a.createElement(x.a,{selection:!0},c.map((function(e){return r.a.createElement(x.a.Item,{onClick:function(){return t.push("/retro?id=".concat(e.id))}},r.a.createElement(x.a.Content,null,r.a.createElement(x.a.Header,null,e.id)))})))))))};var W=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0];return t[1],r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(L,{error:!1})),r.a.createElement(l.a,{path:"/retro"},r.a.createElement(I,null)),r.a.createElement(l.a,{path:"/admin"},a?r.a.createElement(B,null):r.a.createElement(L,{error:!0})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[166,1,2]]]);
//# sourceMappingURL=main.135815aa.chunk.js.map